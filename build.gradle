plugins {
    id 'groovy'
    id 'idea'
    id 'com.gradle.plugin-publish' version '0.9.1'
    id 'com.github.kropp.teamcity-gitversion' version '0.1.2'
}

repositories {
    mavenCentral()
}

sourceCompatibility = 1.7

idea {
    module {
        jdkName = '1.7'
        inheritOutputDirs = true
    }
}

group = 'com.github.kropp'

dependencies {
    compile gradleApi()
    compile localGroovy()

    compile 'org.eclipse.jgit:org.eclipse.jgit:4.1.1.+'

    testCompile 'junit:junit:4.+'
    testCompile 'org.hamcrest:hamcrest-library:1.3'
}

// release publishing to gradle plugin repo
pluginBundle {
    website = 'https://github.com/kropp/gradle-teamcity-gitversion-plugin'
    vcsUrl = 'https://github.com/kropp/gradle-teamcity-gitversion-plugin'
    description = 'A plugin for setting project version based on Git tag and branch names'
    tags = ['git', 'version', 'teamcity']
    plugins {
        teamcityGitVersionPlugin {
            id = 'com.github.kropp.teamcity-gitversion'
            displayName = 'Git version'
        }
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.10'
}